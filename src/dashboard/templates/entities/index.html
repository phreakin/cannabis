{% extends "base.html" %}
{% block title %}Entity Management â€“ Cannabis Data Aggregator{% endblock %}
{% block page_title %}Entity Management{% endblock %}

{% block content %}
<p class="text-muted mb-4">Manually manage cannabis companies, doctors, brands, products, licenses, strains, and shops. All records are stored in the database and can be exported to CSV.</p>

<div class="row g-4">

  <!-- Companies -->
  <div class="col-sm-6 col-xl-3">
    <a href="/entities/companies" class="text-decoration-none">
      <div class="stat-card d-flex align-items-center gap-3" style="cursor:pointer;transition:box-shadow .15s" onmouseover="this.style.boxShadow='0 4px 16px rgba(56,142,60,.2)'" onmouseout="this.style.boxShadow=''">
        <div class="stat-icon" style="background:#e8f5e9;">
          <i class="bi bi-building" style="color:#388e3c;"></i>
        </div>
        <div>
          <div class="stat-value">{{ counts.companies }}</div>
          <div class="stat-label">Companies</div>
          <div class="text-muted-sm mt-1">Parent organizations</div>
        </div>
      </div>
    </a>
  </div>

  <!-- Doctors -->
  <div class="col-sm-6 col-xl-3">
    <a href="/entities/doctors" class="text-decoration-none">
      <div class="stat-card d-flex align-items-center gap-3" style="cursor:pointer;transition:box-shadow .15s" onmouseover="this.style.boxShadow='0 4px 16px rgba(56,142,60,.2)'" onmouseout="this.style.boxShadow=''">
        <div class="stat-icon" style="background:#e3f2fd;">
          <i class="bi bi-person-badge" style="color:#1565c0;"></i>
        </div>
        <div>
          <div class="stat-value">{{ counts.doctors }}</div>
          <div class="stat-label">Doctors</div>
          <div class="text-muted-sm mt-1">Recommending physicians</div>
        </div>
      </div>
    </a>
  </div>

  <!-- Brands -->
  <div class="col-sm-6 col-xl-3">
    <a href="/entities/brands" class="text-decoration-none">
      <div class="stat-card d-flex align-items-center gap-3" style="cursor:pointer;transition:box-shadow .15s" onmouseover="this.style.boxShadow='0 4px 16px rgba(56,142,60,.2)'" onmouseout="this.style.boxShadow=''">
        <div class="stat-icon" style="background:#fff8e1;">
          <i class="bi bi-tag" style="color:#f57f17;"></i>
        </div>
        <div>
          <div class="stat-value">{{ counts.brands }}</div>
          <div class="stat-label">Brands</div>
          <div class="text-muted-sm mt-1">Cannabis product brands</div>
        </div>
      </div>
    </a>
  </div>

  <!-- Products -->
  <div class="col-sm-6 col-xl-3">
    <a href="/entities/products" class="text-decoration-none">
      <div class="stat-card d-flex align-items-center gap-3" style="cursor:pointer;transition:box-shadow .15s" onmouseover="this.style.boxShadow='0 4px 16px rgba(56,142,60,.2)'" onmouseout="this.style.boxShadow=''">
        <div class="stat-icon" style="background:#fce4ec;">
          <i class="bi bi-box-seam" style="color:#c62828;"></i>
        </div>
        <div>
          <div class="stat-value">{{ counts.products }}</div>
          <div class="stat-label">Products</div>
          <div class="text-muted-sm mt-1">Individual SKUs</div>
        </div>
      </div>
    </a>
  </div>

  <!-- Licenses -->
  <div class="col-sm-6 col-xl-3">
    <a href="/entities/licenses" class="text-decoration-none">
      <div class="stat-card d-flex align-items-center gap-3" style="cursor:pointer;transition:box-shadow .15s" onmouseover="this.style.boxShadow='0 4px 16px rgba(56,142,60,.2)'" onmouseout="this.style.boxShadow=''">
        <div class="stat-icon" style="background:#e8eaf6;">
          <i class="bi bi-patch-check" style="color:#3949ab;"></i>
        </div>
        <div>
          <div class="stat-value">{{ counts.licenses }}</div>
          <div class="stat-label">Licenses</div>
          <div class="text-muted-sm mt-1">State-issued MJ licenses</div>
        </div>
      </div>
    </a>
  </div>

  <!-- Strains -->
  <div class="col-sm-6 col-xl-3">
    <a href="/entities/strains" class="text-decoration-none">
      <div class="stat-card d-flex align-items-center gap-3" style="cursor:pointer;transition:box-shadow .15s" onmouseover="this.style.boxShadow='0 4px 16px rgba(56,142,60,.2)'" onmouseout="this.style.boxShadow=''">
        <div class="stat-icon" style="background:#f3e5f5;">
          <i class="bi bi-flower1" style="color:#7b1fa2;"></i>
        </div>
        <div>
          <div class="stat-value">{{ counts.strains }}</div>
          <div class="stat-label">Strains</div>
          <div class="text-muted-sm mt-1">Cannabis cultivars</div>
        </div>
      </div>
    </a>
  </div>

  <!-- Shops -->
  <div class="col-sm-6 col-xl-3">
    <a href="/entities/shops" class="text-decoration-none">
      <div class="stat-card d-flex align-items-center gap-3" style="cursor:pointer;transition:box-shadow .15s" onmouseover="this.style.boxShadow='0 4px 16px rgba(56,142,60,.2)'" onmouseout="this.style.boxShadow=''">
        <div class="stat-icon" style="background:#e0f2f1;">
          <i class="bi bi-shop" style="color:#00695c;"></i>
        </div>
        <div>
          <div class="stat-value">{{ counts.shops }}</div>
          <div class="stat-label">Shops</div>
          <div class="text-muted-sm mt-1">Dispensaries &amp; delivery</div>
        </div>
      </div>
    </a>
  </div>

</div>

<div class="row g-4 mt-2">
  <div class="col-12">
    <div class="card">
      <div class="card-header">Quick Actions</div>
      <div class="card-body d-flex flex-column gap-2">
        <div class="d-flex flex-wrap gap-2">
          <a href="/entities/companies" class="btn btn-outline-primary btn-sm"><i class="bi bi-building me-1"></i>Manage Companies</a>
          <a href="/entities/doctors"   class="btn btn-outline-primary btn-sm"><i class="bi bi-person-badge me-1"></i>Manage Doctors</a>
          <a href="/entities/brands"    class="btn btn-outline-primary btn-sm"><i class="bi bi-tag me-1"></i>Manage Brands</a>
          <a href="/entities/products"  class="btn btn-outline-primary btn-sm"><i class="bi bi-box-seam me-1"></i>Manage Products</a>
          <a href="/entities/licenses"  class="btn btn-outline-primary btn-sm"><i class="bi bi-patch-check me-1"></i>Manage Licenses</a>
          <a href="/entities/strains"   class="btn btn-outline-primary btn-sm"><i class="bi bi-flower1 me-1"></i>Manage Strains</a>
          <a href="/entities/shops"     class="btn btn-outline-primary btn-sm"><i class="bi bi-shop me-1"></i>Manage Shops</a>
        </div>
        <div class="d-flex flex-wrap gap-2">
          <a href="/api/entities/companies?format=csv" class="btn btn-outline-secondary btn-sm"><i class="bi bi-download me-1"></i>Export Companies CSV</a>
          <a href="/api/entities/doctors?format=csv"   class="btn btn-outline-secondary btn-sm"><i class="bi bi-download me-1"></i>Export Doctors CSV</a>
          <a href="/api/entities/brands?format=csv"    class="btn btn-outline-secondary btn-sm"><i class="bi bi-download me-1"></i>Export Brands CSV</a>
          <a href="/api/entities/products?format=csv"  class="btn btn-outline-secondary btn-sm"><i class="bi bi-download me-1"></i>Export Products CSV</a>
          <a href="/api/entities/licenses?format=csv"  class="btn btn-outline-secondary btn-sm"><i class="bi bi-download me-1"></i>Export Licenses CSV</a>
          <a href="/api/entities/strains?format=csv"   class="btn btn-outline-secondary btn-sm"><i class="bi bi-download me-1"></i>Export Strains CSV</a>
          <a href="/api/entities/shops?format=csv"     class="btn btn-outline-secondary btn-sm"><i class="bi bi-download me-1"></i>Export Shops CSV</a>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
